
@{
    ViewData["Title"] = "TrainingView";
}

@model Opus.Models.ViewModels.TrainingVM
<style>
    #container {
        /*border: 1px solid red;
        border-radius: .5em;*/
        padding: 10px;
    }

        #container:-webkit-full-screen,
        #container:-moz-full-screen,
        #container:-ms-fullscreen,
        #container:fullscreen {
            width: 100vw;
            height: 100vh;
        }

    .scrollbar {
        max-height: 100%;
        overflow-y: auto;
    }
</style>
<link rel="stylesheet" href="~/lib/pan_zoom/src/css/jquery.pan.css" />

<div class="content-header">
    <div class="d-flex align-items-center">
        <div class="me-auto">
            <h3 class="page-title">View Training Form</h3>
            <div class="d-inline-block align-items-center">
                <nav>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#"><i class="mdi mdi-home-outline"></i></a></li>
                        <li class="breadcrumb-item"><a href="/training">Training</a></li>
                        <li class="breadcrumb-item" aria-current="page">View</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>

<section class="content">
    <div class="row">
        <div class="col-12">
            <div class="box">
                <div class="box-header with-border">
                    <h4 class="box-title">View Training Form</h4>
                </div>
                <div class="box-body">
                    <div class="form-group row">
                        <label class="col-form-label col-md-2">Location (Firma)</label>
                        <div class="col-md-10">
                            <div class="form-group">
                                @*
                                    <select class="form-control select2" style="width: 100%;" id="locationselect" asp-for="LocationId">
                                        <option selected="selected" value="0" disabled="disabled">Select Location</option>
                                        <option>Arif Yılmaz</option>
                                        <option>Semih İnanç</option>
                                        <option>Sinan Er</option>
                                        <option>Hatice Şahiner</option>
                                        <option>Semali Çelik</option>
                                    </select>*@
                                <input class="form-control datepicker" type="text" autocomplete="off" value="@Model.Location.Name">
                            </div>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-form-label col-md-2">Subject (Konu)</label>
                        <div class="col-md-10">
                            <input class="form-control datepicker" type="text" autocomplete="off" value="@Model.Subject">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-form-label col-md-2">Description (Açıklama)</label>
                        <div class="col-md-10">
                            <input class="form-control datepicker" type="text" autocomplete="off" value="@Model.Description">
                        </div>
                    </div>

                    @*
                        <div class="form-group row">
                            <label class="col-form-label col-md-2">Document (Eğitim Formu - Resim)</label>
                            <div class="text-center">
                                <a class="pan text-center" data-big="/assets/training/@Model.Id/@Model.DocumentImgUrl">
                                    <img class="pan-zoom" style="max-height:600px;height:auto;width:auto;" src="/assets/training/@Model.Id/@Model.DocumentImgUrl" draggable="false"/>
                                </a>
                            </div>
                        </div>
                    *@
                    <div class="form-group row">
                        <div id="container" style="overflow-y: auto;">
                            <p class="text-center">
                                <a href="#" id="toggle_fullscreen"><img class="exp_zoom" style="max-height:600px;height:auto;width:auto; zoom:1.5;" src="/assets/training/@Model.Id/@Model.DocumentImgUrl" draggable="false" /></a>
                            <p class="fllscr_info d-none" style="position: fixed; bottom: 0; left: 50%; color: white; text-shadow: 2px 2px #000;">Tam ekrandan çıkmak için resme tıklatın veya dokunun.</p>
                            </p>
                        </div>
                    </div>

                    <div id="exp-alert" class="d-none">
                        <div class="form-group row">
                            <div class="col-md-2"></div>
                            <div class=" col-md-10 imageform d-none">
                                <div class="alert alert-danger" id="exp-alert-message">
                                    <p>We have some problem!</p>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div class="border-bottom" style="margin-bottom: 20px;"></div>
                    <h4>Staff Training</h4>
                    <p></p>
                    <p></p>


                    <!------Form Details------>


                    <div class="row">
                        <div class="col-12">
                            <div class="table-responsive">
                                <table id="locationTable" class="table table-hover table-bordered table-striped dataTables">
                                    <thead>
                                        <tr>
                                            <th class="d-none"></th>
                                            <th>Date</th>
                                            <th>Trainer</th>
                                            <th>Staff</th>
                                            <th>Reference</th>
                                        </tr>
                                    </thead>
                                    <tbody id="locationTbody">

                                        @foreach (var item in Model.Enumerable_StaffTraining)
                                        {

                                            var fullname = item.Staff.FirstName + " " + item.Staff.LastName;

                                            <tr>
                                                <td>@item.Date.ToString("dd.MM.yyyy")</td>
                                                <td>@item.Trainer.FullName</td>
                                                <td>@fullname</td>
                                                <td>@item.References.Reference</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts{
    <script src="~/lib/pan_zoom/dist/jquery.pan.min.js"></script>
    <script src="~/lib/pan_zoom/src/js/jquery.pan.js"></script>

    @*<script src="js/directive.js"></script>*@

    @*<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>*@
    @*<script src="/lib/zoom-master/index.js"></script>*@
    <script src="/lib/zoom-master/directive.js"></script>

    <script>
        $(document).ready(function () {
            //$(".pan").pan();
            /*
            $(document).keyup(function (e) {
                if (e.key === "Escape") { // escape key maps to keycode `27`

                    $('.exp_zoom').attr("style", "max-height:600px; height:auto;");
                    $('.fllscr_info').addClass("d-none");

                }
            });
            */
        });
        $('#toggle_fullscreen').on('click', function () {
            // if already full screen; exit
            // else go fullscreen
            fullScreenInit();
        });
        jQuery(document).on('keyup', function (evt) {
            if (evt.keyCode == 27) {

            }
        });
        function fullScreenInit() {
            if (
                document.fullscreenElement ||
                document.webkitFullscreenElement ||
                document.mozFullScreenElement ||
                document.msFullscreenElement
            ) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                $('.exp_zoom').attr("style", "max-height:600px; height:auto;");
                $('.fllscr_info').addClass("d-none");

            } else {
                element = $('#container').get(0);
                if (element.requestFullscreen) {
                    element.requestFullscreen();
                } else if (element.mozRequestFullScreen) {
                    element.mozRequestFullScreen();
                } else if (element.webkitRequestFullscreen) {
                    element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
                } else if (element.msRequestFullscreen) {
                    element.msRequestFullscreen();
                }
                $('.exp_zoom').attr("style", "max-height:auto;");
                $('.fllscr_info').removeClass("d-none");

            }
        }
    </script>
}